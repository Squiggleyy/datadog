name: docker_build
on: [push]
jobs:
  build:
    environment: datadog
    runs-on: ubuntu-latest
    steps:
      - name: checkout repo content
        uses: actions/checkout@v2
      - name: install libraries
        env:
          DOCKER_PASSWORD: ${{ secrets.DOCKER_PASSWORD }}
        run: |
          pushd kubernetes/nodejs_tracing/dockerfile_configuration/
          echo $DOCKER_PASSWORD > docker.txt
          cat docker.txt | docker login --username jenksgibbons --password-stdin
          docker build -t jenksgibbons/knote .;docker push jenksgibbons/knote
        shell: bash
